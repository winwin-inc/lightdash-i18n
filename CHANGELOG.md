# 更新日志

> **版本号规则说明**：
>
> -   开发环境更新小版本号（如 v0.2092.1, v0.2092.2）
> -   生产环境上线更新次要版本号（如 v0.2092, v0.2093）

## v0.2094.2 (2026-02-10)

-   **Bug 修复**
    -   数据透视表格式化处理
-   **调优**
    -   useInfiniteQueryResults 钩子加载状态逻辑优化

## v0.2094.1 (2026-02-10)

-   **新功能**
    -   CSP 支持额外 CDN 域名
    -   数据库迁移与 SQL 修复重复图表 slug
    -   DashboardService slug 生成与 promote 加载状态优化
-   **调优**
    -   前端代理与分页、可视化组件数据处理
    -   useInfiniteQueryResults 的 fetchMoreRows 逻辑优化
    -   图表与自定义可视化数据加载与尺寸计算
    -   移除 react-scan 等无用依赖

## v0.2093.1 (2026-01-20)

-   **新功能**
    -   CDN/OSS 集成：静态资源、文件上传、Dockerfile 与 CI
    -   API URL 封装与 base/history 修补
    -   自托管 Inter 字体与本地联调指南
-   **Bug 修复**
    -   自定义可视化数据与渲染、useColumns 判空
    -   OSS 兼容与 API/i18n 路径
    -   默认分页改为 1000
-   **调优**
    -   CustomVisualization memo 与性能
    -   HTML 静态资源 CDN 重写，CDN_PATH_PREFIX 改为 msy-x
    -   移除废弃工作流并收敛 Docker/CDN 配置

## v0.2092.16 (2026-01-20)

### 调优

-   隐藏看板图表标题中的过滤器悬停按钮，简化界面交互

## v0.2092.15 (2026-01-20)

### 调优

-   代码优化和性能改进

## v0.2092.12 (2026-01-20)

### 新功能

-   实现双轴图表的零轴对齐功能，通过计算最小值并调整轴配置，确保两个 Y 轴的零值位置对齐
-   优化移动端饼图外侧标签显示，允许标签超出容器显示，并优化引导线配置（缩短长度、使用平滑曲线、设置最小转角），防止标签和引导线超出屏幕

### Bug 修复

-   修复表格头部和尾部在 sticky 状态下的 z-index 显示问题，确保固定表头和表尾正确显示在内容之上

## v0.2092.9 (2026-01-20)

### 新功能

-   增强表格列宽度控制，支持自定义列宽、最大宽度和最小宽度配置
-   优化表格中条形图的展示效果，改进条形图在表格单元格中的渲染

### Bug 修复

-   修复表格列值范围计算问题，改进条件格式化的数值处理，过滤无效值并确保类型安全
-   修复 VisualizationBigNumberConfig 组件中的依赖项问题，优化性能

## v0.2092.1 (2026-01-12)

### 新功能

-   添加移动端响应式支持到筛选器输入组件，实现 useIsMobileDevice hook
-   为多选输入组件实现防抖功能，提升用户体验
-   添加微信小程序返回按钮并增强返回导航，支持 toast 通知提示

## v0.2091.60 (2026-01-08)

### 新功能

-   实现体验账户创建和管理功能，包括数据库和用户服务更新
-   增加小程序回退按钮，点击手动退回小程序

## v0.2091.59 (2026-01-07)

### 新功能

-   添加体验账户功能，包括数据库变更和用户界面更新

## v0.2091.58 (2026-01-05)

### 新功能

-   在 FilterSettings 组件中实现只读状态处理

### Bug 修复

-   在 AsyncQueryService 中添加流读取的错误处理，防止未处理的 promise 拒绝并确保资源清理

## v0.2091.57 (2026-01-05)

### 新功能

-   添加只读筛选器选项配置及翻译支持

### 调优

-   简化 S3CacheClient 中的超时源确定逻辑
-   简化 RenameService 中的正则转义处理

## v0.2091.56 (2026-01-04)

### 新功能

-   添加 S3 客户端请求超时配置，防止下载超时

### 调优

-   更新 S3 请求超时配置并升级 @smithy/node-http-handler 到 4.4.7 版本

## v0.2091.55 (2026-01-04)

### 调优

-   添加用户访问管理的角色别名，改进 ProjectAccess 组件的翻译处理

## v0.2091.54 (2025-12-31)

### 调优

-   改进 EmbedDashboard、Dashboard 和 MinimalDashboard 组件的加载状态处理
-   简化 MinimalDashboard 的错误处理，移除冗余检查并返回一致的加载消息

## v0.2091.49 (2025-12-31)

### 新功能

-   实现 MobileLayout 组件，支持移动端路由和微信小程序返回导航处理

### 调优

-   简化微信小程序返回导航逻辑，移除未使用的 hook
-   更新 ForbiddenPanel 组件，使用 NoDashboardPermission 组件，并在相关组件中禁用 AI 组织设置请求

## v0.2091.48 (2025-12-30)

### 调优

-   添加微信小程序返回导航处理，改进看板错误处理

## v0.2091.47 (2025-12-25)

### 新功能

-   为大数字可视化添加布局方向选项
-   实现堆叠柱状图系列按总值排序功能
-   添加图表系列的工具提示排序功能
-   实现双轴图表的零轴对齐，通过计算最小值并调整轴配置
-   增强饼图和柱状图的移动端响应式，允许外部标签溢出并调整布局参数
-   改进 Vite watch 配置，优化移动端图表标签处理和布局调整

### Bug 修复

-   恢复 SimplePieChart 组件的加载和空状态，提升用户体验

## v0.2091.46 (2025-12-24)

### Bug 修复

-   修复字段名正则转义中可能为 null 的值，防止运行时错误

### 调优

-   增强 DashboardProvider 类目过滤初始化逻辑，支持客户使用模式并保留过滤配置
-   从 useDashboardFilters 中移除 resetDashboardFilters，简化代码逻辑
-   更新 ForbiddenPanel 和 Mobile 组件，优化组件结构

## v0.2091.45 (2025-12-24)

### 调优

-   增强正则处理逻辑，优化移动端 UI 组件，提升用户体验

## v0.2091.44 (2025-12-23)

### 调优

-   简化 DashboardService 类目过滤逻辑，应用到所有用户，只有当用户缺少 email 或 mobile 时才返回空列表
-   简化 Page 组件标题渲染逻辑，提升代码清晰度和一致性

## v0.2091.43 (2025-12-23)

### 调优

-   更新应用标题和翻译，统一品牌标识为马上赢 X

## v0.2091.42 (2025-12-22)

### Bug 修复

-   修复 API token 请求看板接口权限过滤问题

### 调优

-   更新品牌标识，从 Lightdash 统一更新为马上赢 X
-   简化无权限面板组件并更新访问权限相关翻译

## v0.2091.41 (2025-12-20)

### 新功能

-   增加看板无权限页面

### Bug 修复

-   增加对移动端/PC 链接转换，避免出现错误页面
-   无类目看板配置展示处理

### 调优

-   权限判断逻辑优化，使用接口获取看板权限，不再使用底层类木权限表
-   版本号脱离 lightdash ，采用自主版本，优化底部 footer 展示，目前和版本号一致
-   客户使用模式下，支持管理员权限展示空间列表
-   历史用户，增加自动加入组织并处理默认角色

## v0.2091.35 (2025-12-04)

### Bug 修复

-   移动端 select 选择器多选导致页面移动
-   PC 端点击浏览全部看板，存在数据丢失，空白页面问题

## v0.2091.32 (2025-12-02)

### Bug 修复

-   低版本浏览器内核兼容处理
    -   引入 polyfill、兼容低版本 API，处理编译 target，降低打包版本
    -   Object.hasOwn、正则命名捕获组 (?...)、class static block 等页面错误

### 调优

-   移动端 tab 选中样式处理
-   微信 webview 环境下，回退事件特殊处理
-   微信 webview 环境下，隐藏 headler 和 navbar

## v0.2091.28 (2025-11-26)

### 新功能

-   lightdash 支持配置关联类目和父级筛选器

### Bug 修复

-   客户使用模式下，根据用户权限，默认筛选项处理
-   客户使用模式下，可以看到非当前权限之外的类目

### 调优

-   lightdash 变量增加默认值处理
    -   dashboardSlug、dashboardName 如果处于非看板中，默认为 NA
-   看板页面筛选器等接口统一增加 dashboard 相关变量

## v0.2091.24 (2025-11-24)

### 调优

-   移动端全局筛选器展示逻辑调整
    -   之前存在 tab 页面的时候，不展示全局筛选器，目前移除这个限制

## v0.2091.23 (2025-11-21)

### 新功能

-   增加 lightdash 运行时变量 user.dashboardSlug、user.dashboardName

### Bug 修复

-   修复导入/导出/复制看板筛选器及状态丢失问题

### 调优

-   "客户使用模式" 支持管理员查看看板详情（最后编辑、浏览量等参数）

## v0.2091.16 (2025-11-17)

### 新功能

-   增加看板列表权限控制处理
    -   使用 user_dashboard_category 表关联查询权限
    -   开启 "客户使用模式"，并且是查看者权限才会使用表关联处理

## v0.2091.15 (2025-11-14)

### 新功能

-   增加 "客户使用模式"，项目管理页面可以开启
    -   标记客户使用的项目，会隐藏部分内容，参考丽慈 问题记录

### Bug 修复

-   表格数据下载失败问题记录（tab 页面筛选器条件丢失）

### 调优

-   移动端/PC 图片自适应功能支持
-   饼图配置，自定义格式化配置支持

## v0.2091.13 (2025-11-14)

### Bug 修复

-   数据格式化配置，图片不同步问题修复
-   csv 下载中文乱码问题修复
-   filter 筛选器遗留问题修复
-   根据配置隐藏登录页无用文案，采用 loading 方式
    -   自定义 AUTH_OIDC_CLIENT_FORCE_REDIRECT 变量，开启 oidc 客户端强制重定向

## v0.2091.12 (2025-10-30)

### 新功能

-   增加 S3 上传前缀配置，使用 S3_PATH_PREFIX 进行配置

## v0.2091.5 (2025-10-20)

### 新功能

-   合并 lightdash 最新代码
-   支持 tab 页面筛选器

### Bug 修复

-   vega 图表下载失败问题修复
-   升级 echarts 版本，解决饼图下载失败问题
-   登录重定向，跳转地址缓存处理
