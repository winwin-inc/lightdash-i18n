---
description: Git commit 提交规范，使用 Conventional Commits 标准，提交信息使用中文
globs: 
alwaysApply: true
---

# Git Commit 提交规范

## ⚠️ 重要：强制使用中文

**所有 Git commit 信息必须使用中文描述，这是强制要求。**

当生成或建议 commit 信息时：
- ✅ **必须**使用中文编写提交描述
- ❌ **禁止**使用英文编写提交描述
- 提交类型（feat、fix 等）使用小写英文
- 提交描述必须使用中文

## 规范说明

本项目遵循 [Conventional Commits](https://www.conventionalcommits.org/) 标准，所有提交信息必须使用中文。

## 提交格式

```
<类型>[可选 范围]: <描述>
```

### 格式要求

- **类型**：必填，使用小写英文（如 `feat`、`fix` 等）
- **范围**：可选，用括号包裹，表示影响的范围（如 `frontend`、`backend`、`common`）
- **描述**：必填，使用中文，简洁明了地描述本次提交的内容
- **冒号后必须有空格**

## 提交类型

### 主要类型

- **`feat`**: 新功能（会触发版本更新）
  - 示例：`feat: 添加看板权限检查功能`
  - 示例：`feat(frontend): 新增多语言切换组件`

- **`fix`**: 修复 bug（会触发版本更新）
  - 示例：`fix: 修复登录时无限循环的问题`
  - 示例：`fix(backend): 修复数据库查询超时错误`

### 其他类型

- **`docs`**: 文档更新
  - 示例：`docs: 更新 API 使用文档`
  - 示例：`docs(readme): 添加安装说明`

- **`style`**: 代码格式调整（不影响功能）
  - 示例：`style: 调整代码缩进格式`
  - 示例：`style(frontend): 统一按钮样式`

- **`refactor`**: 代码重构（既不是新功能也不是 bug 修复）
  - 示例：`refactor: 重构用户权限检查逻辑`
  - 示例：`refactor(backend): 优化数据库查询性能`

- **`perf`**: 性能优化
  - 示例：`perf: 优化图表渲染性能`
  - 示例：`perf(backend): 优化数据库索引`

- **`test`**: 测试相关
  - 示例：`test: 添加用户权限单元测试`
  - 示例：`test(e2e): 添加看板创建流程测试`

- **`chore`**: 构建过程或辅助工具的变动
  - 示例：`chore: 更新依赖包版本`
  - 示例：`chore(deps): 升级 TypeScript 到 5.5.4`

- **`ci`**: CI 配置文件和脚本的变动
  - 示例：`ci: 更新 GitHub Actions 工作流`

- **`build`**: 构建系统或外部依赖的变动
  - 示例：`build: 更新 webpack 配置`

## 提交示例

### ✅ 正确示例

```
feat: 添加看板权限检查功能
fix(backend): 修复数据库连接池泄漏问题
docs: 更新国际化使用指南
style(frontend): 统一按钮组件样式
refactor: 重构用户权限检查逻辑
perf: 优化图表数据加载性能
test: 添加看板权限单元测试
chore: 更新 pnpm 到 9.15.5
```

### ❌ 错误示例

```
// 缺少类型
添加看板权限检查功能

// 描述使用英文
feat: add dashboard permission check

// 缺少冒号后的空格
feat:添加看板权限检查功能

// 类型使用中文
功能: 添加看板权限检查

// 描述过于简单
feat: 更新

// 使用句号结尾（不需要）
feat: 添加看板权限检查功能。
```

## 提交范围（Scope）

可选，用于说明提交影响的范围，常见范围包括：

- `frontend`: 前端相关
- `backend`: 后端相关
- `common`: 公共包相关
- `cli`: CLI 工具相关
- `warehouses`: 数据仓库适配器相关
- `e2e`: 端到端测试相关
- `deps`: 依赖更新
- `config`: 配置文件

## 提交信息最佳实践

1. **使用中文描述（强制）**：所有提交描述必须使用中文，这是硬性要求，不允许使用英文
2. **简洁明了**：描述应该清晰表达本次提交的目的
3. **使用动词开头**：如"添加"、"修复"、"更新"、"优化"、"重构"、"调整"等
4. **避免使用句号**：提交信息末尾不需要句号
5. **一行描述**：尽量在一行内完成描述，如需详细说明可使用提交正文

## AI 生成 Commit 信息时的要求

当 AI 助手需要生成或建议 commit 信息时，必须遵循以下规则：

1. **语言要求**：提交描述必须使用中文，不允许使用英文
2. **格式要求**：遵循 `<type>[可选 scope]: <中文描述>` 格式
3. **示例参考**：参考下方"提交示例"部分的正确示例
4. **自动生成时**：如果用户要求生成 commit 信息，必须生成中文版本

### 生成示例

当用户要求生成 commit 信息时，应该这样生成：

```
feat: 添加看板权限检查功能
fix(backend): 修复数据库连接池泄漏问题
docs: 更新国际化使用指南
```

而不是：

```
feat: add dashboard permission check
fix(backend): fix database connection pool leak
docs: update i18n usage guide
```

## 提交正文（可选）

如果需要在提交信息中添加更详细的说明，可以使用提交正文：

```
feat: 添加看板权限检查功能

实现了基于用户类目的看板权限控制：
- 支持 customer use 模式下的权限检查
- 添加权限检查 hook
- 无权限时自动跳转到无权限页面
```

## 注意事项

- **`feat` 和 `fix` 类型会触发版本更新**，如果只是文档、样式或其他不影响功能的改动，请使用相应的类型（如 `docs`、`style`、`chore` 等）
- 提交前确保代码已通过 lint 和 format 检查
- 保持提交信息的一致性，便于后续查看和维护
